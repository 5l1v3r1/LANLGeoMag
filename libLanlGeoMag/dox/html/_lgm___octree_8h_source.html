<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LanlGeoMag: /home/mgh/LanlGeoMag/libLanlGeoMag/Lgm/Lgm_Octree.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>/home/mgh/LanlGeoMag/libLanlGeoMag/Lgm/Lgm_Octree.h</h1><a href="_lgm___octree_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef LGM_OCTREE </span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define LGM_OCTREE</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include "<a class="code" href="_lgm___vec_8h.html">Lgm_Vec.h</a>"</span>
<a name="l00005"></a>00005 
<a name="l00006"></a><a class="code" href="_lgm___octree_8h.html#83d4bc3d9d18688b2119ca2e77c5904c">00006</a> <span class="preprocessor">#define     OCTREE_MAX_LEVELS           16</span>
<a name="l00007"></a><a class="code" href="_lgm___octree_8h.html#50cc89ad030d4d45cf6450bf67ab1a6a">00007</a> <span class="preprocessor"></span><span class="preprocessor">#define     OCTREE_ROOT_LEVEL           15</span>
<a name="l00008"></a><a class="code" href="_lgm___octree_8h.html#840a13e4ac67b3dece56d79c7ff99b59">00008</a> <span class="preprocessor"></span><span class="preprocessor">#define     OCTREE_MAX_VAL              (32768.0)</span>
<a name="l00009"></a><a class="code" href="_lgm___octree_8h.html#4a40a403f3149048e731aa2c41fcf848">00009</a> <span class="preprocessor"></span><span class="preprocessor">#define     OCTREE_MAX_DATA_PER_OCTANT  10</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a><a class="code" href="_lgm___octree_8h.html#a8cecfc5c5c054d2875c03e77b7be15d">00011</a> <span class="preprocessor">#define     TRUE    1</span>
<a name="l00012"></a><a class="code" href="_lgm___octree_8h.html#a93f0eb578d23995850d61f7d61c55c1">00012</a> <span class="preprocessor"></span><span class="preprocessor">#define     FALSE   0</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="_lgm___octree_8h.html#9f3b435ad7cc9c098b3de5d62950a1ca">00015</a> <span class="preprocessor">#define     OCTREE_KNN_SUCCESS              1</span>
<a name="l00016"></a><a class="code" href="_lgm___octree_8h.html#b5ea4768ba7862b8601a3ef27d6843f0">00016</a> <span class="preprocessor"></span><span class="preprocessor">#define     OCTREE_KNN_TOO_FEW_NNS          0</span>
<a name="l00017"></a><a class="code" href="_lgm___octree_8h.html#2a18af7173f980bc48f9184d3258b502">00017</a> <span class="preprocessor"></span><span class="preprocessor">#define     OCTREE_KNN_NOT_ENOUGH_DATA     -1</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a><a class="code" href="_lgm___octree_8h.html#72a1f207d0b0d8875f6d549b7b869bfa">00019</a> <span class="preprocessor">#define     OCTREE_IS_NULL                 -2</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="struct___lgm___octree_data.html">00022</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___lgm___octree_data.html">_Lgm_OctreeData</a> {
<a name="l00023"></a>00023 
<a name="l00024"></a><a class="code" href="struct___lgm___octree_data.html#5dc98779b36676034ccefe5094251c55">00024</a>     <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a>          <a class="code" href="struct___lgm___octree_data.html#5dc98779b36676034ccefe5094251c55">Position</a>;
<a name="l00025"></a><a class="code" href="struct___lgm___octree_data.html#867ec249dee38c139df965aa1611ed2a">00025</a>     <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a>          <a class="code" href="struct___lgm___octree_data.html#867ec249dee38c139df965aa1611ed2a">B</a>;
<a name="l00026"></a><a class="code" href="struct___lgm___octree_data.html#527416adf36035c3ea5799827e7cd8b9">00026</a>     <span class="keywordtype">double</span>              <a class="code" href="struct___lgm___octree_data.html#527416adf36035c3ea5799827e7cd8b9">Dist2</a>;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 } <a class="code" href="struct___lgm___octree_data.html">Lgm_OctreeData</a>;
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 
<a name="l00036"></a><a class="code" href="struct___lgm___octree_cell.html">00036</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___lgm___octree_cell.html">_Lgm_OctreeCell</a> {
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="struct___lgm___octree_cell.html#068d265e1d6fb7a08db0fd289db2b3ae">00038</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="struct___lgm___octree_cell.html#068d265e1d6fb7a08db0fd289db2b3ae">xLocationCode</a>;  <span class="comment">// X Location Code</span>
<a name="l00039"></a><a class="code" href="struct___lgm___octree_cell.html#fd9d41af65e45952ff7a6ec326f8ce86">00039</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="struct___lgm___octree_cell.html#fd9d41af65e45952ff7a6ec326f8ce86">yLocationCode</a>;  <span class="comment">// Y Location Code</span>
<a name="l00040"></a><a class="code" href="struct___lgm___octree_cell.html#197011505d40af9f13649872c67a61e1">00040</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="struct___lgm___octree_cell.html#197011505d40af9f13649872c67a61e1">zLocationCode</a>;  <span class="comment">// Z Location Code</span>
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="struct___lgm___octree_cell.html#a3d2c0758a70c3bb49a3d73a14a94d0a">00042</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="struct___lgm___octree_cell.html#a3d2c0758a70c3bb49a3d73a14a94d0a">Level</a>;          <span class="comment">// keeps track of what level we are on</span>
<a name="l00043"></a>00043 
<a name="l00044"></a><a class="code" href="struct___lgm___octree_cell.html#6db57193d204ce24705e3e95a23bc7c1">00044</a>     <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a>          <a class="code" href="struct___lgm___octree_cell.html#6db57193d204ce24705e3e95a23bc7c1">Center</a>;         <span class="comment">// Center of cube</span>
<a name="l00045"></a><a class="code" href="struct___lgm___octree_cell.html#8ee9be1b5aa75abae556de3088cba6d9">00045</a>     <span class="keywordtype">double</span>              <a class="code" href="struct___lgm___octree_cell.html#8ee9be1b5aa75abae556de3088cba6d9">h</a>;              <span class="comment">// half width of cube face</span>
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="struct___lgm___octree_cell.html#4adbef09447a8b0f9932cec8c5e507ee">00047</a>     <span class="keyword">struct </span><a class="code" href="struct___lgm___octree_cell.html">_Lgm_OctreeCell</a>  *<a class="code" href="struct___lgm___octree_cell.html#4adbef09447a8b0f9932cec8c5e507ee">Parent</a>;        <span class="comment">// points to parent cell</span>
<a name="l00048"></a><a class="code" href="struct___lgm___octree_cell.html#3a1ad61cfa92956310b1584c5c9ccb80">00048</a>     <span class="keyword">struct </span><a class="code" href="struct___lgm___octree_cell.html">_Lgm_OctreeCell</a>  *<a class="code" href="struct___lgm___octree_cell.html#3a1ad61cfa92956310b1584c5c9ccb80">Octant</a>;        <span class="comment">// points to block of 8 children cells</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="struct___lgm___octree_cell.html#783709cb5c4b14570bf342099817323d">00051</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   <a class="code" href="struct___lgm___octree_cell.html#783709cb5c4b14570bf342099817323d">nDataBelow</a>;     <span class="comment">// Keeps track of data contained in all children below.</span>
<a name="l00052"></a><a class="code" href="struct___lgm___octree_cell.html#c6f35f845cda4fa90dc63051fc4f061a">00052</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>   <a class="code" href="struct___lgm___octree_cell.html#c6f35f845cda4fa90dc63051fc4f061a">nData</a>;          <span class="comment">// Number of data items in this cell. (0 for non-leaf nodes)</span>
<a name="l00053"></a><a class="code" href="struct___lgm___octree_cell.html#173e4af4e76fa34ce187cdf4c913e9d3">00053</a>     <a class="code" href="struct___lgm___octree_data.html">Lgm_OctreeData</a>      *<a class="code" href="struct___lgm___octree_cell.html#173e4af4e76fa34ce187cdf4c913e9d3">Data</a>;          <span class="comment">// Cell data. This will be NULL except for </span>
<a name="l00054"></a>00054                                         <span class="comment">// the leafs.</span>
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 } <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>;
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 
<a name="l00059"></a><a class="code" href="struct__p_queue.html">00059</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__p_queue.html">_pQueue</a> {
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="struct__p_queue.html#7530efafe5945a266bf8383ae47c7228">00061</a>     <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>  *<a class="code" href="struct__p_queue.html#7530efafe5945a266bf8383ae47c7228">Obj</a>;
<a name="l00062"></a><a class="code" href="struct__p_queue.html#fcb495567b98cde535c5239b17681f62">00062</a>     <span class="keywordtype">double</span>          <a class="code" href="struct__p_queue.html#fcb495567b98cde535c5239b17681f62">MinDist2</a>;   <span class="comment">// Minimum possible distance^2 between object and query point.</span>
<a name="l00063"></a>00063                                 <span class="comment">// If the object is a point, then its the actual distance^2.</span>
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="struct__p_queue.html#270a4dbd002743db25f63825195e4006">00065</a>     <span class="keywordtype">int</span>             <a class="code" href="struct__p_queue.html#270a4dbd002743db25f63825195e4006">IsPoint</a>;    <span class="comment">// If this is TRUE, then a data point is stored in Obj.Data[j]</span>
<a name="l00066"></a>00066                                 <span class="comment">// Else its a non-leaf node.</span>
<a name="l00067"></a><a class="code" href="struct__p_queue.html#37d972ae0b47b9099e30983131d31916">00067</a>     <span class="keywordtype">int</span>             <a class="code" href="struct__p_queue.html#37d972ae0b47b9099e30983131d31916">j</a>;          <span class="comment">// Index where data point is stored.</span>
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="struct__p_queue.html#4717220aafe87eeda3986b3a258a2a2a">00069</a>     <span class="keyword">struct </span><a class="code" href="struct__p_queue.html">_pQueue</a> *<a class="code" href="struct__p_queue.html#4717220aafe87eeda3986b3a258a2a2a">Prev</a>;       <span class="comment">// for linked list</span>
<a name="l00070"></a><a class="code" href="struct__p_queue.html#3a316f1387f6ede290905c4d79962b17">00070</a>     <span class="keyword">struct </span><a class="code" href="struct__p_queue.html">_pQueue</a> *<a class="code" href="struct__p_queue.html#3a316f1387f6ede290905c4d79962b17">Next</a>;       <span class="comment">// for linked list</span>
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 } <a class="code" href="struct__p_queue.html">pQueue</a>;
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="keywordtype">void</span>            <a class="code" href="_lgm___octree_8h.html#5be6ddcd43586ee6989697d995319c31">Binary</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n, <span class="keywordtype">char</span> *Str );
<a name="l00076"></a>00076 <span class="keywordtype">void</span>            <a class="code" href="_lgm___octree_8h.html#ebbdef4a1addf536593f776187402c39">Lgm_OctreeFreeBranch</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Cell );
<a name="l00077"></a>00077 <span class="keywordtype">void</span>            <a class="code" href="_lgm___octree_8h.html#8966fb8ec73aa1c0e437604568685d13">Lgm_FreeOctree</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *ot );
<a name="l00078"></a>00078 <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>  *<a class="code" href="_lgm___octree_8h.html#cf7917181ce8b3f4ceb3f8f6af804889">Lgm_CreateOctreeRoot</a>( );
<a name="l00079"></a>00079 <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>  *<a class="code" href="_lgm___octree_8h.html#9b05a3600cfb54efc5f722928e1db5d4">Lgm_OctreeTraverseToLocCode</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Cell, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ChildLevel, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> xLocationCode, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> yLocationCode, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> zLocationCode );
<a name="l00080"></a>00080 <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>  *<a class="code" href="_lgm___octree_8h.html#271dd512841a7b4308c59db95853b8e1">Lgm_LocateNearestCell</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Root, <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *q );
<a name="l00081"></a>00081 <span class="keywordtype">double</span>          <a class="code" href="_lgm___octree_8h.html#07152ce3d1254cca2f4f2d4735de34b7">MinDist</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Cell, <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *q );
<a name="l00082"></a>00082 <span class="keywordtype">double</span>          <a class="code" href="_lgm___octree_8h.html#cb735b055954d17d224db5a55dbd14e6">InsertCell</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Cell, <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *q, <a class="code" href="struct__p_queue.html">pQueue</a> **PQ, <span class="keywordtype">double</span> MaxDist2 );
<a name="l00083"></a>00083 <span class="keywordtype">void</span>            <a class="code" href="_lgm___octree_8h.html#0128a077b1023c02e79cfaf65a4e6cfc">InsertPoint</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Cell, <span class="keywordtype">int</span> <a class="code" href="struct__p_queue.html#37d972ae0b47b9099e30983131d31916">j</a>, <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *q, <a class="code" href="struct__p_queue.html">pQueue</a> **PQ );
<a name="l00084"></a>00084 <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>  *<a class="code" href="_lgm___octree_8h.html#9ff86b033bf330695e810d00ac8022e1">DescendTowardClosestLeaf</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Node, <a class="code" href="struct__p_queue.html">pQueue</a> **PQ, <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *q, <span class="keywordtype">double</span> MaxDist2 );
<a name="l00085"></a>00085 <a class="code" href="struct__p_queue.html">pQueue</a>          *<a class="code" href="_lgm___octree_8h.html#653f08b2912abb5a5fb6c1761b8a8cec">PopObj</a>( <a class="code" href="struct__p_queue.html">pQueue</a> **PQ );
<a name="l00086"></a>00086 <span class="keywordtype">int</span>             <a class="code" href="_lgm___octree_8h.html#885f0695706ada1ee750180afe105958">Lgm_Octree_kNN</a>( <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *q, <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Root, <span class="keywordtype">int</span> K, <span class="keywordtype">int</span> *Kgot, <span class="keywordtype">double</span> MaxDist2, <a class="code" href="struct___lgm___octree_data.html">Lgm_OctreeData</a> *kNN );
<a name="l00087"></a>00087 <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>  *<a class="code" href="_lgm___octree_8h.html#8faba8ef3514ee1be8aedd369afd4db9">CreateNewOctants</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Parent );
<a name="l00088"></a>00088 <span class="keywordtype">void</span>            <a class="code" href="_lgm___octree_8h.html#3df40f5467250c1b9c2ba1053d38d76f">SubDivideVolume</a>( <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a> *Vol );
<a name="l00089"></a>00089 <a class="code" href="struct___lgm___octree_cell.html">Lgm_OctreeCell</a>  *<a class="code" href="_lgm___octree_8h.html#20080c6b6bf182550e7c1e99d3807020">Lgm_InitOctree</a>( <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *ObjectPoints, <a class="code" href="struct_lgm___vector.html">Lgm_Vector</a> *ObjectData, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> N, <span class="keywordtype">double</span> *Min, <span class="keywordtype">double</span> *Max, <span class="keywordtype">double</span> *Diff );
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small><a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> </small></address>
</body>
</html>
